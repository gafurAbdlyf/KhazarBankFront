<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bank System</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style2.css" />
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Bank OF Khazar</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="#services">Services</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#features">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#operations">Operations</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#settings">Settings</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact</a>
            </li>
            <li class="nav-item">
              <button class="nav-link" id="logout">Logout</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <header class="bg-primary text-white text-center py-5">
      <div class="container">
        <h1>Welcome to Bank OF Khazar</h1>
        <p class="lead">Your trusted partner in secure and efficient banking</p>
        <a href="#services" class="btn btn-light btn-lg"
          >Explore Our Services</a
        >
      </div>
    </header>

    <section id="services" class="py-5">
      <div class="container">
        <h2 class="text-center mb-4">Our Services</h2>
        <div class="row">
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Personal Banking</h5>
                <p class="card-text">
                  Manage your personal accounts with ease and security.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Corporate Banking</h5>
                <p class="card-text">
                  Streamlined solutions for businesses of all sizes.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Loans & Mortgages</h5>
                <p class="card-text">
                  Flexible financing options tailored to your needs.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="features" class="bg-light py-5">
      <div class="container">
        <h2 class="text-center mb-4">Why Choose Us?</h2>
        <div class="row">
          <div class="col-md-6">
            <h3>Secure Transactions</h3>
            <p>
              Our state-of-the-art security ensures your transactions are safe
              and confidential.
            </p>
          </div>
          <div class="col-md-6">
            <h3>24/7 Customer Support</h3>
            <p>We're here to assist you anytime, anywhere.</p>
          </div>
          <div class="col-md-6">
            <h3>Advanced Technology</h3>
            <p>
              Enjoy seamless banking with our innovative tools and platforms.
            </p>
          </div>
          <div class="col-md-6">
            <h3>Comprehensive Solutions</h3>
            <p>
              From savings accounts to large-scale business loans, we have you
              covered.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="operations" class="py-5">
      <div class="container">
        <div id="operationModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Operation</h2>
            <form id="operationForm">
              <div id="operationFields"></div>
            </form>
          </div>
        </div>
        <h2 class="text-center mb-4">Banking Operations</h2>
        <div class="row">
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Top-Up</h5>
                <p class="card-text">
                  Easily add funds to your account with just a few clicks.
                </p>
                <button id="topUpButton" class="btn">Top-Up Now</button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Card to Card</h5>
                <p class="card-text">
                  Transfer money securely between cards in real-time.
                </p>
                <button id="transferFundsButton" class="btn">
                  Transfer Funds
                </button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Payments</h5>
                <p class="card-text">
                  Pay your bills and make purchases effortlessly.
                </p>
                <button id="makePaymentButton" class="btn">
                  Make a Payment
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-md-6">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Check Balance</h5>
                <p class="card-text">View your account balance instantly.</p>
                <button id="checkBalanceButton" class="btn">
                  Check Balance
                </button>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card text-center">
              <div class="card-body">
                <h5 class="card-title">Transaction History</h5>
                <p class="card-text">Review your past transactions anytime.</p>
                <button id="viewHistoryButton" class="btn">View History</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="settings" class="py-5">
      <div class="container">
        <h2 class="text-center mb-4">Settings</h2>
        <form id="changeSettingsForm">
          <div class="mb-3">
            <label for="fullName" class="form-label">Full Name</label>
            <input
              type="text"
              id="fullName"
              class="form-control"
              placeholder="Enter your full name"
              required
            />
          </div>
          <div class="mb-3">
            <label for="phoneNumber" class="form-label">Mobile Number</label>
            <input
              type="text"
              id="phoneNumber"
              class="form-control"
              placeholder="Enter your mobile number"
              required
            />
          </div>
          <div class="mb-3">
            <label for="finCode" class="form-label">FIN Code</label>
            <input
              type="text"
              id="finCode"
              class="form-control"
              placeholder="Enter your FIN code"
              required
            />
          </div>
          <div class="mb-3">
            <label for="cardNumber" class="form-label">Card Number</label>
            <input
              type="text"
              id="cardNumber"
              class="form-control"
              placeholder="Enter your card number"
              required
            />
          </div>
          <div class="mb-3">
            <label for="currentPassword" class="form-label"
              >Current Password</label
            >
            <input
              type="password"
              id="currentPassword"
              class="form-control"
              placeholder="Enter current password"
              required
            />
          </div>
          <div class="mb-3">
            <label for="newPassword" class="form-label">New Password</label>
            <input
              type="password"
              id="newPassword"
              class="form-control"
              placeholder="Enter new password"
              required
            />
          </div>
          <div class="mb-3">
            <label for="confirmPassword" class="form-label"
              >Confirm New Password</label
            >
            <input
              type="password"
              id="confirmPassword"
              class="form-control"
              placeholder="Confirm new password"
              required
            />
          </div>
          <button type="submit" class="btn btn-primary">Update Settings</button>
        </form>
      </div>
    </section>
    <div style="display: flex; justify-content: center; padding-block: 30px">
      <a href="debitcard.html" target="_blank" class="btn btn-primary"
        >Show Your Card Details</a
      >
    </div>
    <section id="contact" class="py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-4">Contact Us</h2>
        <p class="text-center">
          At Bank of Khazar, we prioritize your needs and feedback. Reach out to
          us through the following channels:
        </p>
        <ul class="list-unstyled text-center">
          <li>Email: support@bankofkhazar.com</li>
          <li>Phone: +994708008010</li>
          <li>Phone: +994702714222</li>
          <li>Address: Mahsati Ganjavi</li>
        </ul>
      </div>
    </section>

    <footer class="bg-dark text-white text-center py-3">
      <p class="mb-0">&copy; 2024 Bank OF Khazar. All rights reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js2.js"></script>
    <script>
      const logoutBtn = document.getElementById("logout")
      logoutBtn.addEventListener("click", () => {
        localStorage.clear()
        window.location.href = "login.html"
      })
      document
        .getElementById("changeSettingsForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault()

          const fullName = document.getElementById("fullName").value
          const phoneNumber = document.getElementById("phoneNumber").value
          const finCode = document.getElementById("finCode").value
          const cardNumber = document.getElementById("cardNumber").value
          const currentPassword =
            document.getElementById("currentPassword").value
          const newPassword = document.getElementById("newPassword").value
          const confirmPassword =
            document.getElementById("confirmPassword").value

          if (newPassword !== confirmPassword) {
            alert("New password and confirmation do not match!")
            return
          }

          const userId = localStorage.getItem("userId")

          if (!userId) {
            alert("User ID not found in localStorage. Please log in again.")
            return
          }

          const requestBody = {
            userId: userId,
            firstName: fullName.split(" ")[0],
            lastName: fullName.split(" ")[1] || "",
            email: "",
            phoneNumber: phoneNumber,
            oldPassword: currentPassword,
            newPassword: newPassword,
            finCode: finCode,
          }

          try {
            const response = await fetch(
              "http://167.172.150.140:8080/api/Auth/UpdateUser",
              {
                method: "PUT",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify(requestBody),
              }
            )

            const data = await response.json()

            if (data.isSuccess) {
              alert("Settings updated successfully.")
              window.location.reload()
            } else {
              alert(`Error: ${data.message}`)
            }
          } catch (error) {
            console.error("Error during the request:", error)
            alert("An error occurred. Please try again.")
          }
        })
    </script>
  </body>
</html>
